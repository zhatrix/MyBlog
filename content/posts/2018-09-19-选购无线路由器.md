---
title: 无线路由器常识
date: 2018-09-19
tags: ["技术"]
---
## 概述

先来看下路由器都包括哪些参数或者功能，他们具体的含义是什么。

包括如下：CPU、传输速率、适用频段、适用频率、网络接口、无线桥接、网络标准、QOS、防火墙、WPS几个部分。

### 路由器

​	是一种连接两个以上个别网络的设备，提供路由与转送两种重要机制，可以决定封包从来源端到目的端所经过的路由路径（host到host之间的传输路径），这个过程称为路由；将路由器输入端的封包移送至适当的路由器输出端（在路由器内部进行），这称为转送。路由工作在OSI模型的第三层——即网络层。

####  相关术语：

	SSID：用来表示无线网络，每个网络都有自己的SSID来标识自己。

​	BSSID：用来标识一个BSS，其格式和MAC地址一样，是48位的地址格式。一般来说，它就是所处的无线接入点的MAC地址。某种程度来说，它的作用和SSID类似，但是SSID是网络的名字，是给人看的，BSSID是给机器看的，BSSID类似MAC地址。

​        BSS（Basic Service Set）：由一组相互通信的工作站组成，是802.11无线网络的基本组件。主要有两种类型的IBSS和基础结构型网络。IBSS又叫ADHOC，是临时组网，通信方式为Station<->Station；基础结构形网络，其通信方式是Station<->AP<->Station，也就是所有无线网络中的设备要想通信，都得经过AP。在无线网络的基础形网络中，最重要的两类设备：AP和Station。

​        DS（Distributed System）：即分布式系统。分布式系统属于802.11逻辑组件，负责将帧转发至目的地址，802.11并未规定其技术细节，大多数商业产品以桥接引擎合分步式系统媒介共同构成分布式系统。分步式系统是接入点之间转发帧的骨干网络，一般是以太网。其实，骨干网络并不是分步系统的全部，而是其媒介。主要有三点：骨干网（例如以太网）、桥接器（具有有线无线两个网络接口的接入点包含它）、属于骨干网上的接入点所管辖的基础性网络的station通信（和外界或者BSS内部的station）必须经过DS、而外部路由只知道station的mac地址，所以也需要通过分布式系统才能知道station的具体位置并且正确送到。分步式系统中的接入点之间必须相互传递与之关联的工作站的信息，这样整个分步式系统才能知道哪个station和哪个ap关联，保证分步式系统正常工作（即转达给正确的station）。分步式系统也可以是使用无线媒介(WDS)，不一定一定是以太网。总之，分步式系统骨干网络（例如以太网）做为媒介，连接各个接入点，每个接入点与其内的station可构成BSS，各个接入点中的桥接控制器有到达骨干网络和其内部BSS无线网的接口（类似两个MAC地址），station通信需要通过分布式系统。

​	

### CPU 处理器

​	CPU是处理数据的核心，它的好坏直接和速度关联（主要是有路由器定制系统的路由使用）。处理局域网与外网的数据交换时，有足够的响应时间与快速的响应速度，从而达到信号稳定、不丢包。

	通常在中低端路由器中，CPU负责交换路由信息、路由表查找以及转发数据包。在高端路由器中，通常包转发和查表由ASIC芯片完成，CPU只实现路由协议、计算路由以及分发路由表。由于技术的发展，路由器中许多工作都可以由硬件实现（专用芯片）。

### 协议和速率

路由器的传输速率根据传输协议不同而不同：



![wifi](/posts/assets/1730747_1433688240.jpgw640.jpg)



| 协议     | 发布年/月 | Op.标准频宽                          | 实际速度（标准）                            | 实际速度（最大）                                             | 半径范围（室内）                                             | 半径范围（室外）                                             |
| -------- | --------- | ------------------------------------ | ------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| Legacy   | 1997      | 2.4-2.5 GHz                          | 1 Mbit/s                                    | 2 Mbit/s                                                     | ?                                                            | ?                                                            |
| 802.11a  | 1999      | 5.15-5.35/5.47-5.725/5.725-5.875 GHz | 25 Mbit/s                                   | 54 Mbit/s                                                    | 约30米                                                       | 约45米[[3\]](https://zh.wikipedia.org/zh-hans/IEEE_802.11#cite_note-3) |
| 802.11b  | 1999      | 2.4-2.5 GHz                          | 6.5 Mbit/s                                  | 11 Mbit/s                                                    | 约30米                                                       | 约100米                                                      |
| 802.11g  | 2003      | 2.4-2.5 GHz                          | 25 Mbit/s                                   | 54 Mbit/s                                                    | 约30米                                                       | 约100米                                                      |
| 802.11n  | 2009      | 2.4 GHz or 5 GHz bands               | 300 Mbit/s（20MHz*4 MIMO）                  | 600 Mbit/s（40MHz*4 MIMO）                                   | 约70米                                                       | 约250米                                                      |
| 802.11p  | 2009      | 5.86-5.925 GHz                       | 3 Mbit/s                                    | 27 Mbit/s                                                    | 约300米                                                      | 约1000米                                                     |
| 802.11ac | 2011.11   | 5 GHz                                | 433Mbit/s, 867Mbit/s（80MHz，160MHz为可选） | 867Mbit/s, 1.73 Gbit/s, 3.47 Gbit/s, 6.93 Gbit/s（8 MIMO，160MHz） | 约35米[[4\]](https://zh.wikipedia.org/zh-hans/IEEE_802.11#cite_note-4) |                                                              |
| 802.11ad | 2009.12   | 2.4/5/60 GHz                         | 4620Mbps                                    | 7Gbps(6756.75Mbps)                                           | 约1-10米[[5\]](https://zh.wikipedia.org/zh-hans/IEEE_802.11#cite_note-5)[[6\]](https://zh.wikipedia.org/zh-hans/IEEE_802.11#cite_note-6) |                                                              |
| 802.11ax | 2018.12   | 2.4/5 GHz                            |                                             | 10.53Gbps                                                    | 10米                                                         | 100米[[7\]](https://zh.wikipedia.org/zh-hans/IEEE_802.11#cite_note-7) |

### 适用频段

一般支持5g或2.4g两个频率范围段的无线信号。如果两者同时可以设置，而不是互斥那么，这个路由器还能够同时支持两种频段（频段即Band），这相当于这个ap可建立两个无线网络，它们采用不同的频段（这类似收音机在长波范围内收音和短波范围内收音）

#### Channel（信道）

​        Channel是对频段的进一步划分（每个频段称作一个Channel信道）.   处于不同传输信道上面的数据，如果信道覆盖范围没有重叠，那么不会相互干扰。

​	除了wifi，微波、红外线、蓝牙（使用802.15协议）的工作频段也都有在2.4gHZ范围内的，所以，它们传输的时候会对wifi传输造成干扰，因为两者在不同的协议下进行通信，所以互相将对方传输的信号识别为噪声。有时候配置AP的时候，Channel中有一个类似“Auto”的选项值，这表示打开AP的时候，AP自己Scan周围的环境，选择一个干扰最小的Channel来进行通信，当选择好了一个Channel的时候，一般就不会改变了。

#### Channel Width（信道宽度）

​      它表示一个Channel片段的宽度，  有”20M HZ“、”40M HZ“等，（假设5g的频段宽度总共为100M，平均划分为互不干扰的10个Channel，那么每个Channel的Channel Width就为100M/10=10M，实际Channel并不一定是完全不重叠的）。这个参数可能依赖于一些其它的选项，例如不是802.11N的协议，就可能不会有40M HZ的Channel Width（N模式有一个特点就是可以把两个Channel合并，通过提高ChannelWidth来提高吞吐量）。例如选择了"20M HZ"这个Channel Width之后，后面再选择一个“5.18GHZ”的Channel，则表示以5.18GHZ为中心的前"10M HZ"以及其后面的"10M HZ"频带范围被占用。

​        至此可知，配置无线AP的时候，如果屋子里面有很多的AP(也就是无线路由接入点）的话，仔细设置它们的Channel Width和Channel可以保证它们相互之间的干扰（类似收音机里面的串台）尽可能小。当然，如果相互干扰了，那么Net Mode所指定的协议也会有相应的处理方式让他们之间进行协调（例如让谁先通信谁等一会再通信之类的），但是这样网络的性能就不如没有干扰的时候好了。

### MU-MIMO 

**MU-MIMO**:即Multi-User Multiple-Input
Multiple-Output 的缩写，直译为“多用户 多输入 多输出”， 是最新Wi-Fi技术标准802.11ac Wave 2（即802.11ac 2.0标准）的最重要特性之一，能彻底改变Wi-Fi网络的运行方式，显著提高网络总吞吐量和总容量，将上网速度提升三倍。802.11ac Wave 2另外两个特性是数据传输通道最高可扩张至160MHz提供第四空间流，可真正实现网络资源的充分利用和性能提升。

![img](/posts/assets/linksysfinal.jpg)

通俗来说，传统的SU-MIMO路由器信号呈现一个圆环（如上图左），以AP（路由器或热点等）为圆心，呈360度向外发射信号，并依据远近亲疏，依次单独与上网设备进行通讯。这时当接入的设备过多时，就会出现设备等待通讯的情况，网络卡顿的情况就由此产生；更为严重的是，这种依次单独的通讯，是基于设备对AP（路由器或热点等）总频宽的平均值。也就是说，如果拥有100MHz的频宽，按照“一次只能服务一个”的原理，在有3个设备同时接入网络的情况下，每个设备只能得到约33.3MHz频宽，另外的66.6MHz则处于闲置状态。即在同一个Wi-Fi区域内，连接设备越多宽频被平均得越小，浪费的资源越多，网速也就越慢。而使用MU-MIMO路由器则不同（如上图右），MU-MIMO路由的信号在时域、频域、空域三个维度上分成三部分，就像是同时发出三个不同的信号，能够同时与三部设备协同工作；尤其值得一提的是，由于三个信号互不干扰，因此每台设备得到的频宽资源并没有打折扣，资源得到最大化的利用，从路由器角度衡量，数据传输速率提高了3倍，改善了网络资源利用率，从而确保Wi-Fi无间断连接。

### 扩展

目前比较好用的扩展有梅林固件、OPENWRT等。

梅林是华硕半官方性质的自定义路由器固件。Merlin固件使用的是华硕官方的闭源驱动，而不是其他人使用的开源驱动，稳定性相比开源驱动要高很多，同时也就意味着非华硕的路由器想用梅林纯看运气，碰巧跟华硕某个版本硬件一致了就能用，不一致就别指望能有支持了。而且相对于开源社区普遍的功能优先，梅林固件是稳定性优先的导向，不支持超频、也更不容易出现用着用着自己死机、卡顿的情况，除bug的速度也更快。

另外梅林固件最方便的就是其软件中心，如下图。可以安装插件，可以实现去广告等功能。

![img](/posts/assets/020331qj29w4dz84zd98x4.png)

另外还要关注路由器的内存和存储情况，以及是否支持USB接口。至于其他的QOS、WPS功能这些都是路由器的基础功能，一般情况下都支持。



结合我自己的需求，以及网上的一些评价，我决定购买网件的R7000。

我的需求：

1.  支持100M带宽
2.  USB接口支持外接移动硬盘和U盘
3.  文件分享
4.  能够扩展
5.  支持5G
6.  支持MU-MIMO技术
7.  1000元内



参考：

*   [路由器 - 维基百科，自由的百科全书](https://zh.wikipedia.org/wiki/%E8%B7%AF%E7%94%B1%E5%99%A8)
*    [IEEE 802.11 - 维基百科，自由的百科全书](https://zh.wikipedia.org/zh-hans/IEEE_802.11)

*   [Wi-Fi - 维基百科，自由的百科全书](https://zh.wikipedia.org/wiki/Wi-Fi)

*   [WIFI基本知识及802.11协议整理 - 【DNS服务器IP地址-域名注册查询-CDN加速技术】](http://www.dnsdizhi.com/post-177.html)



## CHANGELOH

20180919  张振玉 购买路由器参考资料
